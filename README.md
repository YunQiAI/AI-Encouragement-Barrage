# AI鼓励弹幕应用

一个macOS原生应用，通过AI生成的鼓励性弹幕提升用户的工作体验。应用能够自动截屏分析用户当前活动，并用AI生成鼓励语，以弹幕形式在屏幕上滚动，同时支持语音朗读。

## 功能特点

- **自动截屏**：使用ScreenCaptureKit定期自动截取屏幕内容，提供给AI进行分析
- **AI生成鼓励语**：使用本地部署的Ollama gemma3:4b模型分析截图，生成积极正面的鼓励语
- **全屏弹幕**：AI生成的鼓励语以弹幕形式在屏幕上滚动显示
- **语音朗读**：使用系统语音合成功能朗读AI生成的鼓励语
- **菜单栏控制**：通过菜单栏图标控制应用，无需常规窗口
- **自定义设置**：可调整截屏间隔、弹幕速度、语音风格等

## 系统要求

- macOS 12.3或更高版本（需要ScreenCaptureKit支持）
- 本地安装的Ollama环境（推荐0.5.11或更高版本）
- 已加载的gemma3:4b模型

## 安装与设置

1. 确保已安装Ollama并启动服务：
   ```bash
   ollama serve
   ```

2. 确保已加载gemma3:4b模型：
   ```bash
   ollama pull gemma3:4b
   ```

3. 下载并安装AI鼓励弹幕应用

4. 首次启动时，应用会请求必要的权限：
   - 屏幕录制权限（用于截屏）
   - 辅助功能权限（用于创建全屏覆盖层）
   - 麦克风权限（用于未来版本的语音输入功能）

## 使用方法

1. 启动应用后，它会在菜单栏显示一个气泡图标
2. 点击图标，选择"启动"开始使用
3. 应用会定期截取屏幕内容，分析后显示鼓励性弹幕
4. 通过菜单栏图标 -> "设置"可以调整各种参数：
   - 截屏间隔
   - 弹幕速度
   - 语音朗读开关
   - 语音风格

## 隐私说明

- 所有截屏内容仅在本地处理，不会上传到任何服务器
- 使用本地部署的Ollama AI模型进行分析，保护用户隐私
- 应用不会保存截屏图像，仅临时存储在内存中用于分析

## 技术实现

- 使用SwiftUI和SwiftData开发用户界面和数据存储
- 使用ScreenCaptureKit进行高效屏幕捕获（替代已废弃的CGWindowListCreateImage）
- 使用Ollama API进行本地AI分析
- 使用AVSpeechSynthesizer进行语音合成

## 最近更新

- **2025.03.20**: 将屏幕捕获实现从CGWindowListCreateImage迁移到ScreenCaptureKit，提高性能和兼容性。详情请参阅[ScreenCaptureKit-Migration.md](ScreenCaptureKit-Migration.md)。

## 许可证

MIT License